#   .ifjcode21
#   JUMP *BYPASS



LABEL readi0
  PUSHFRAME

  DEFVAR LF@result
  READ LF@result int

  JUMPIFEQ *readi_retnil LF@result int@-1

  JUMP *readi_end

# Return nil
LABEL *readi_retnil
  MOVE LF@result nil@nil
  JUMP *readi_end

# Function end
LABEL *readi_end
  POPFRAME
  DEFVAR LF@!ret_0
  MOVE LF@!ret_0 TF@result
  RETURN



# LABEL *BYPASS
#   CREATEFRAME
#   PUSHFRAME
#   CREATEFRAME
#   CALL readi0
#   WRITE LF@!ret_0
# 
#   # check if ret is nil
#   JUMPIFEQ isnil LF@!ret_0 nil@nil
# LABEL back
# 
#   # write a newline for debugging
#   WRITE string@\010
#   POPFRAME
#   JUMP END
# 
# LABEL isnil
#   WRITE string@is\032nil\010
#   JUMP back
# 
# LABEL END
